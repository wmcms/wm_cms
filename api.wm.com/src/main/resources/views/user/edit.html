<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="share/head :: head(~{::seo})">
    <seo>
        <title>编辑用户</title>
    </seo>
</head>
<body class="skin-blue content-body">
<div class="content-header">
    <h1>用户管理 - 新增</h1>
</div>
<div class="content">
    <div class="box box-primary">
        <div class="box-header with-border">
            <div class="btn-toolbar">
                <button class="btn btn-primary" onclick="R.SaveUser()">保 存</button>
                <a class="btn btn-default"  data-dismiss="modal">取 消</a>

            </div>
        </div>
        <div class="box-body">
            <form class="form-horizontal">
                <input type="hidden" name="userId" th:value="${id}"/>
                <script type="text/template">
                    <input type="hidden" name="userId" value="${it.userId|Default,0}"/>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="username" class="col-sm-4 control-label"><em
                                        class="required">*</em>用户名</label>
                                <div class="col-sm-8">
                                    <input type="text" name="userName" value="${it.userName|Default}" maxlength="20"
                                           class="form-control {required:true,remote:{url:'/check/username',type:'post',data:{userId:${it.userId|Default,0}}},messages:{remote:'用户名已存在'}}"/>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="realName" class="col-sm-4 control-label">
                                    <em class="required">*</em>姓名</label>
                                <div class="col-sm-8">
                                    <input type="text" name="realName" value="${it.realName|Default}" maxlength="20"
                                           class="form-control {required:true,messages:{required:'姓名不能为空'}}"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="rawPassword" class="col-sm-4 control-label">
                                    {@if it.userId<=0}
                                    <em class="required">*</em>
                                    {@/if}
                                    密码</label>
                                <div class="col-sm-8">
                                    {@if it.userId<=0}
                                    <input type="password" name="password" maxlength="20"
                                           class="form-control {required:true,messages:{required:'密码不能为空'}}"/>
                                    {@else}
                                    <input type="password" name="password" maxlength="20" class="form-control"/>
                                    {@/if}

                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="type" class="col-sm-4 control-label">
                                    用户类型
                                    <span class="in-prompt" title="类型是系统用户的，才可访问后台系统。"></span>
                                </label>
                                <div class="col-sm-8 form-inline">
                                    <select class="form-control" name="userType">
                                        <option value="0" ${it.userType|Selected,0}>普通会员</option>
                                        <option value="1" ${it.userType|Selected,1}>系统用户</option>
                                    </select></div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="email" class="col-sm-4 control-label">电子邮箱</label>
                                <div class="col-sm-8">
                                    <input type="text" name="email" maxlength="50" value="${it.email|Default}"  class="form-control email"/>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="mobile" class="col-sm-4 control-label">手机号码</label>
                                <div class="col-sm-8">
                                    <input type="text"  name="mobile" maxlength="11" value="${it.mobile|Default}" class="form-control {mobile:true,remote:{url:'/check/mobile',type:'post',data:{userId:${it.userId|Default,0}}},messages:{remote:'手机号已存在'}}"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="col-sm-4 control-label">性别</label>
                                <div class="col-sm-8">
                                    <label class="radio-inline"><input type="radio" value="M" name="gender" ${it.gender|Checked,"M"}/>男</label>
                                    <label class="radio-inline"><input type="radio" value="F" name="gender" ${it.gender|Checked,"F"}/>女</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="groupId" class="col-sm-4 control-label">出生日期 </label>
                                <div class="col-sm-8">
                                    <input type="text" name="birthDate"  value="${it.birthDate|Default}"  class="form-control"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="rank" class="col-sm-4 control-label">
                                    等级
                                    <span class="in-prompt"
                                          title="等级数越大，级别越高。用户不能提升自身等级。低级别用户不可查看高级别用户。用户只能被授予比自身等级更低或相同的角色。等级为0或1的用户才可被授予全局用户和全局组织的管理权限。"></span>
                                </label>
                                <div class="col-sm-8">
                                    <input type="text" name="level" value="${it.level|Default}"   class="form-control {digits:true,min:1,max:10}"/>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="status" class="col-sm-4 control-label">用户状态
                                    <span class="in-prompt" title="状态为锁定的用户，将不能登录系统。"></span></label>
                                <div class="col-sm-8">
                                    <select class="form-control" id="status" name="status">
                                        <option value="0" ${it.status|Selected,0}>正常</option>
                                        <option value="1" ${it.status|Selected,1}>锁定</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </script>
            </form>
        </div>
    </div>
</div>
<footer th:include="share/foot::script(~{::script})">
    <script type="text/javascript">
        var __Data__ = {
            Url: {
                Get_User_Url: '/user/get',
                Save_User_Url: '/user/save',
            }
        }
        $(function () {
            $("#validForm").validate();
            $("input[name='username']").focus();
        });
    </script>
    <script type="text/javascript" src="/static/js/user/edit.js">
    </script>
</footer>
</body>
</html>